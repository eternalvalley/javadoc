"use strict";angular.module("javadocSearchApp",["ngResource","ngSanitize","ngRoute","pascalprecht.translate"]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","https://docs.oracle.com/**","https://*.apache.org/**","https://fasterxml.github.io/**","https://docs.spring.io/**","https://google.github.io/**"])}]).config(["$routeProvider",function(a){a.when("/:artifact/:version/:language/:javaClass*",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:artifact/:version/:language?",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:artifact/:version?",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:artifact?",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:""})}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}).useSanitizeValueStrategy(null).determinePreferredLanguage().fallbackLanguage("en")}]),angular.module("javadocSearchApp").value("cache",{}),angular.module("javadocSearchApp").service("mainService",["$resource","cache","forwardMatchSearch","smartSearch","javaClasses",function(a,b,c,d,e){this.search=function(a,b,e){var f=a.match(/^[A-Za-z0-9_]?[a-z0-9]+$/)?c:d;return this.loadJavaClasses(e).then(function(c){return f(a,b,c)})},this.findClass=function(a,b){return this.loadJavaClasses(b).then(function(b){return b.asMap[a]})},this.loadJavaClasses=function(a){return b[a]||(b[a]=e(a)),b[a]}}]),angular.module("javadocSearchApp").service("keycode",[function(){this.isPrintable=function(a){return a>=48&&57>=a?!0:a>=65&&90>=a?!0:a>=96&&105>=a?!0:a>=106&&107>=a?!0:a>=109&&111>=a?!0:a>=186&&192>=a?!0:a>=219&&222>=a?!0:226==a?!0:!1},this.isBackSpace=function(a){return 8===a},this.isEsc=function(a){return 27===a},this.isUp=function(a){return 38===a},this.isDown=function(a){return 40===a},this.isEnter=function(a){return 13===a}}]),angular.module("javadocSearchApp").factory("types",["$filter",function(a){return[{name:a("translate")("all types"),value:"all"},{name:a("translate")("classes"),value:"class"},{name:a("translate")("interfaces"),value:"interface"},{name:a("translate")("enums"),value:"enum"},{name:a("translate")("annotations"),value:"annotation"}]}]),angular.module("javadocSearchApp").factory("artifacts",["$resource","$filter","$window",function(a,b,c){function d(){var a=c.navigator;return a.languages&&a.languages[0]?a.languages[0]:a.language?a.language:a.browserLanguage?a.browserLanguage:a.systemLanguage?a.systemLanguage:a.userLanguage?a.userLanguage:null}function e(a,c,d){var e=b("translate")(a),f=a,g=c,h=d;return{get name(){return e},get value(){return f},get basepath(){return g},get welcome(){return h}}}function f(a,b,c){var d,f=[],g={};return b instanceof Array?b.forEach(function(b){d=new e(b.language,b.value.replace(k,a),c),d.value===l?f.unshift(d):f.push(d),g[d.value]=d}):(d=new e("en",b.replace(k,a),c),f.push(d),g[d.value]=d),{get asArray(){return f},get asMap(){return g}}}function g(a,b,c,d){var e,g,h;return a instanceof Object?(e=a.name,g=a.value?a.value:a.name):(e=a,g=a),g&&b&&b.from&&b.to&&(g=g.replace(b.from,b.to)),h=new f(g,a instanceof Object&&a.basepath?a.basepath:c,d),{get name(){return e},get value(){return g},get languages(){return h}}}function h(a,b,c,d){var e=[],f={};return a.forEach(function(a){var h=new g(a,b,c,d);e.push(h),f[h.value]=h}),{get asArray(){return e},get asMap(){return f}}}function i(a){var b=a.name,c=a.value?a.value:a.name.toLowerCase().replace(/ /g,"-"),d=a.group;a.vconv&&(a.vconv.from=new RegExp(a.vconv.from,"g"));var e=new h(a.versions,a.vconv,a.basepath,a.welcome?a.welcome:"overview-summary.html");return{get name(){return b},get value(){return c},get group(){return d},get versions(){return e}}}function j(a){var b=[],c={};return a.forEach(function(a){var d=new i(a);b.push(d),c[d.value]=d}),{get asArray(){return b},get asMap(){return c}}}var k=new RegExp("%VERSION%","g"),l=d();return a("resources/artifacts.json",{},{query:{isArray:!0,cache:!0}}).query().$promise.then(function(a){return new j(a)})}]),angular.module("javadocSearchApp").factory("target",[function(){return function(a,b){function c(b){function c(b){if(!d||d.value!==b.artifact){var c=a.asMap[b.artifact];d=c?c:a.asArray[0]}}function g(a){if(!e||e.value!==a.version){var b=d.versions.asMap[a.version];e=b?b:d.versions.asArray[0]}}function h(a){if(!f||f.value!==a.language){var b=e.languages.asMap[a.language];f=b?b:e.languages.asArray[0]}}c(b),g(b),h(b)}var d,e,f;return c(b),{javaClass:null,get init(){return c},get artifact(){return d},set artifact(a){d=a,e=d.versions.asArray[0],f=e.languages.asArray[0]},get version(){return e},set version(a){e=a},get language(){return f},set language(a){f=a},get resourcePath(){return"resources/"+d.value+"/"+e.name+".json"},get locationPath(){var a="/"+d.value+"/"+e.value+"/"+f.value;return this.javaClass&&this.javaClass.href&&(a+="/"+this.javaClass.href),a},get relativeJavadocUrl(){return this.javaClass&&this.javaClass.href?this.javaClass.href+".html":f.welcome},get framesJavadocUrl(){return f?f.basepath+"?"+this.relativeJavadocUrl:void 0},get noframesJavadocUrl(){return f?f.basepath+this.relativeJavadocUrl:void 0}}}}]),angular.module("javadocSearchApp").service("javaClasses",["$resource",function(a){function b(a){var b=f[a];return b?b:"unknown"}function c(a){var b=a.replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1 $2").replace(/([a-z0-9])([A-Z])/g,"$1 $2").split(" ");return""===b[0]&&b.shift(),b}function d(a){var d,e,f,g,h,i,j=b(a.t),k=a.h,l=a.h.split(/\//),m=l.pop().split(/\./);return e=m.pop(),f=m.join("."),g=l.join("."),h=null!==e.match(/.?_.?/),h?(d=e.split("_"),i=e.replace(/_/g,"").toLowerCase()):(d=c(e),i=e.toLowerCase()),{get type(){return j},get href(){return k},get outerClassName(){return f},get className(){return e},get javaPackage(){return g},get splitClassNames(){return d},get forwardMatchClassName(){return i},get hasSnakeCaseClassName(){return h}}}function e(a){var b=[],c={};return angular.fromJson(a).forEach(function(a){var e=new d(a);b.push(e),c[e.href]=e}),{get asArray(){return b},get asMap(){return c}}}var f={C:"class",I:"interface",E:"enum","@":"annotation"};return function(b){return a(b,{},{query:{isArray:!0,cache:!0}}).query().$promise.then(function(a){return new e(a)})}}]),angular.module("javadocSearchApp").factory("forwardMatchSearch",[function(){function a(a,b){var c="";c+=f;for(var d=b.splitClassNames,e=a.toUpperCase(),h=d.length-1,i=0;i<d.length;i++){var j=d[i],k=j.toUpperCase();e?k===e?(c+=j+g,e=null):k.startsWith(e)?(c+=j.substring(0,e.length)+g+j.substring(e.length),e=null):(c+=j,e=e.substring(j.length)):c+=j,i!==h&&(c+="_")}return c}function b(a,b){return f+b.className.substring(0,a.length)+g+b.className.substring(a.length)}function c(c,d){var e=d.hasSnakeCaseClassName?a(c,d):b(c,d);return d.outerClassName&&(e=d.outerClassName+"."+e),e}function d(a,b,d,e){if("all"!==b&&b!==d.type)return h;if(!d.forwardMatchClassName.startsWith(a))return h;var f=e,g=c(a,d),i=d.javaPackage,j=d.type,k=d.href;return{get index(){return f},get classNameHtmlSnippet(){return g},get javaPackage(){return i},get type(){return j},get href(){return k},get valid(){return!0}}}function e(a,b,c){var e=[],f=a.toLowerCase();return c.asArray.forEach(function(a){var c=new d(f,b,a,e.length);c.valid&&e.push(c)}),e}var f='<span class="match">',g="</span>",h={valid:!1};return function(a,b,c){return new e(a,b,c)}}]),angular.module("javadocSearchApp").factory("smartSearch",[function(){function a(a,b){return a.length<b.length?!1:0===a.length?!0:a.charAt(0).toLowerCase()!==b.charAt(0).toLowerCase()?!1:1===b.length?!0:a.substring(1).startsWith(b.substring(1))}function b(b,c){for(var d="",g=b.split(/(?=[A-Z])/),h=c.splitClassNames,i=h.length-1,j=0;j<h.length;j++){var k=h[j];if(!g.length)break;if(!a(k,g[0]))return null;for(d+=e;g.length&&a(k,g[0]);){var l=g.shift().length;d+=k.substring(0,l),k=k.substring(l)}d+=f+k,c.hasSnakeCaseClassName&&j!==i&&(d+="_")}if(g.length)return null;for(;j<h.length;j++)d+=h[j];return c.outerClassName&&(d=c.outerClassName+"."+d),d}function c(a,c,d,e){if("all"!==c&&c!==d.type)return g;var f=b(a,d);if(!f)return g;var h=e,i=d.javaPackage,j=d.type,k=d.href;return{get index(){return h},get classNameHtmlSnippet(){return f},get javaPackage(){return i},get type(){return j},get href(){return k},get valid(){return!0}}}function d(a,b,d){var e=[];return d.asArray.forEach(function(d){var f=new c(a,b,d,e.length);f.valid&&e.push(f)}),e}var e='<span class="match">',f="</span>",g={valid:!1};return function(a,b,c){return new d(a,b,c)}}]),angular.module("javadocSearchApp").controller("MainCtrl",["$scope","$window","$location","$routeParams","$timeout","mainService","keycode","artifacts","target","types",function(a,b,c,d,e,f,g,h,i,j){function k(){var c=l.height()+parseFloat(l.css("margin-top"))+parseFloat(l.css("margin-bottom"))+parseFloat(l.css("padding-top"))+parseFloat(l.css("padding-bottom")),d=q.height()+parseFloat(q.css("margin-top"))+parseFloat(q.css("margin-bottom"))+parseFloat(q.css("padding-top"))+parseFloat(q.css("padding-bottom"));a.resultsTop=c;var e=b.innerHeight-c-d;a.mainHeight=e,a.resultsMaxHeight=.95*e;var f=m.width()+o.width()-b.innerWidth;a.searchWordWidth=f?.35*b.innerWidth:null}var l=angular.element("#header"),m=angular.element("#search"),n=angular.element("#search-word"),o=angular.element("#target"),p=angular.element("#results"),q=angular.element("#footer");a.types=j,a.type="all",a.searchWord="",a.results=[],a.showResults=!0,a.searchWordWidth=null,a.mainHeight=null,a.resultsTop=null,a.resultsMaxHeight=null;var r;b.onresize=function(){r&&e.cancel(r),r=e(function(){k()},200)},n.focus(),k(),h.then(function(b){function e(){a.showResults=!1,c.path(a.target.locationPath),a.searchWord&&c.search({search:a.searchWord,type:"all"===a.type?null:a.type}),f.loadJavaClasses(a.target.resourcePath),a.url=a.target.noframesJavadocUrl,c.replace(),n.focus()}function h(){a.target.javaClass=a.results[a.selectedResultIndex],e()}function j(){a.searchWord=d.search,a.onChangeSearch(),a.type=d.type,["class","interface","enum","annotation"].includes(a.type)===!1&&(a.type="all"),a.url=a.target.noframesJavadocUrl,f.findClass(d.javaClass,a.target.resourcePath).then(function(b){a.target.javaClass=b,e()})}a.artifacts=b,a.target=new i(b,d),a.onChangeSearch=function(){return a.searchWord&&a.searchWord.length?void f.search(a.searchWord,a.type,a.target.resourcePath).then(function(b){a.results=b,a.showResults=!0,a.selectedResultIndex=0}):void(a.results=[])},a.onChangeArtifact=function(){a.target.artifact&&(d.artifact=a.target.artifact.value,d.language=null,d.javaClass=null,e())},a.onChangeVersion=function(){a.target.version&&(d.version=a.target.version.value,e())},a.onChangeLanguage=function(){a.target.language&&(d.language=a.target.language.value,e())},a.onClickAnywhere=function(){a.showResults=!1},a.onKeyDown=function(b){if(g.isPrintable(b)||g.isBackSpace(b))return void(a.showResults=!0);if(g.isEsc(b))return void(a.showResults=!1);if(!a.doesShowResults())return void(g.isDown(b)&&(a.showResults=!0));if(g.isUp(b))return void(a.selectedResultIndex>0?a.selectedResultIndex--:a.showResults=!1);if(g.isDown(b)){if(a.selectedResultIndex>=a.results.length-1)return;return void a.selectedResultIndex++}return g.isEnter(b)?void h():void 0},a.onClickResult=function(){h()},a.onMouseEnterResult=function(b){a.selectedResultIndex=b},a.doesShowResults=function(){return a.results&&a.results.length&&a.showResults},a.doesResultsOverflowY=function(){var a=p.height();return a>0&&p[0].scrollHeight>a},a.getFramesReferenceUrl=function(){return a.target.framesJavadocUrl},j()})}]),angular.module("javadocSearchApp").run(["$templateCache",function(a){a.put("views/main.html",'<div id="container" class="container" ng-keydown="::onKeyDown($event.which)" ng-click="::onClickAnywhere()" ng-strict-di> <!-- Add your site or application content here --> <header id="header" class="row"> <div id="search" class="pull-left"> <label> <span>{{\'search\' | translate}}</span> <input id="search-word" type="search" ng-model="searchWord" ng-model-options="::{debounce:200}" ng-change="::onChangeSearch()" ng-style="{width: searchWordWidth}" placeholder="{{\'placeholder\' | translate}}" tabindex="1" autocomplete="off" autofocus> </label> <label> <select ng-model="type" ng-options="type.value as type.name | translate for type in types" ng-change="::onChangeSearch()" tabindex="2"> </select> </label> </div> <div id="target" class="pull-right"> <span class="pull-right"> <label> <span>{{\'target\' | translate}}</span> <select ng-model="target.artifact" ng-options="artifact.name group by artifact.group for artifact in ::artifacts.asArray" ng-change="::onChangeArtifact()" tabindex="3"> </select> </label> <label> <select ng-model="target.version" ng-options="version.name for version in target.artifact.versions.asArray" ng-change="::onChangeVersion()" tabindex="4"> </select> <select ng-model="target.language" ng-options="language.name for language in target.version.languages.asArray" ng-change="::onChangeLanguage()" tabindex="5"> </select> </label> </span> </div> </header> <nav id="results" ng-show="doesShowResults()" ng-class="{\'overflow-y\': doesResultsOverflowY()}" ng-style="{\n        \'top\': resultsTop ? resultsTop + \'px\' : null,\n        \'max-height\': resultsMaxHeight ? resultsMaxHeight + \'px\' : null\n      }"> <ul> <li ng-repeat="result in results" ng-class="{selected: $index === selectedResultIndex}" ng-class-even="\'even\'" ng-class-odd="\'odd\'" ng-click="::onClickResult($index)" ng-mouseenter="::onMouseEnterResult($index)"> <img class="type" alt="{{::result.type}}" ng-src="images/{{::result.type}}.png"> <span class="name" ng-bind-html="::result.classNameHtmlSnippet"></span> <span class="package"> - {{::result.javaPackage}}</span> </li> </ul> </nav> <main ng-style="{height: mainHeight ? mainHeight + \'px\' : null}"> <iframe ng-src="{{url}}"></iframe> </main> <footer id="footer"> <span id="reference">{{\'reference\' | translate}}{{\'colone\' | translate}}</span> <a ng-href="{{url}}" target="JavadocSearchReference">{{url}}</a> <span id="frames">(<a ng-href="{{getFramesReferenceUrl()}}" target="JavadocSearchReference">{{\'frames\' | translate}}</a>)</span> </footer> </div>')}]);